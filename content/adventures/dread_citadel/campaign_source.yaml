# The Dread Citadel Campaign - Source YAML
# PROPRIETARY - All Rights Reserved
#
# This is the SOURCE file with keyspace definitions.
# Run the campaign builder to generate the built campaign:
#
#   python -m spellengine.tools.campaign_builder \
#       --source campaign_source.yaml \
#       --output campaign_built.yaml \
#       --corpus content/corpus/training_corpus.txt
#
# The built output will have concrete hashes/solutions.

id: dread_citadel
title: "The Dread Citadel"
description: "Storm the Dread Citadel and crack its ancient vaults. Learn password analysis through dark fantasy adventure."
version: "2.0.0"
author: "The Cipher Circle"
difficulty: beginner
estimated_time: "45 minutes"

intro_text: |
  The Dread Citadel looms before you, its obsidian towers piercing the blood-red sky.

  For centuries, the Citadel Lord has hoarded the secrets of authentication—
  hash algorithms, password patterns, the very keys to digital kingdoms.

  You have been chosen to join the Cipher Circle—an ancient order of
  pattern breakers who see through the illusions of "secure" passwords.

  But first, you must awaken your gift.

  The Null Cipher awaits to guide you...

outro_text: |
  The Citadel Lord falls, his fortress breached, his secrets laid bare.

  You have proven yourself a true Infiltrator of the Cipher Circle.
  The knowledge you gained here—the patterns, the techniques, the instincts—
  will serve you well in battles yet to come.

  But remember: with great power comes great responsibility.
  Use your skills to defend, to educate, to illuminate.

  The Circle remembers those who walk the righteous path.

  Until we meet again, Infiltrator.

first_chapter: ch_awakening

chapters:
  # =========================================================================
  # CHAPTER 0: THE AWAKENING (Prologue/Tutorial)
  # Brittle Mode - Hand-crafted passwords with explicit hints
  # =========================================================================
  - id: ch_awakening
    title: "The Awakening"
    description: "Learn the ways of the Cipher Circle"
    is_prologue: true
    intro_text: |
      A spectral figure materializes before you—the Null Cipher, ancient
      guide to all who seek to join the Cipher Circle.

      "Welcome, Initiate. Before you storm the Citadel, you must
      understand the truth that makes us powerful:"

      "Humans are predictable. Their passwords reveal their nature."

      "Let me show you..."
    outro_text: |
      The Null Cipher nods approvingly.

      "You have awakened, Initiate. You see what others cannot—
      the patterns that humans weave into their passwords."

      "Now you are ready to face the Dread Citadel itself."
    first_encounter: enc_awakening_intro

    encounters:
      # Prologue encounters remain BRITTLE MODE (explicit passwords)
      - id: enc_awakening_intro
        title: "The Initiation"
        type: tour
        tier: 0
        xp_reward: 5
        intro_text: |
          The Null Cipher gestures to the space around you.

          "Observe the battlefield, Initiate:"

          ◈ LEFT: The hash—a scrambled representation of a password
          ◈ RIGHT: The narrative—context clues hide within
          ◈ BOTTOM: Your input—where you submit your answer

          "Press ENTER to continue your training..."
        objective: "Learn the interface"
        success_text: |
          "Good. You understand the arena."

          "Now let me teach you the first truth of human passwords..."
        next_encounter: enc_obvious_choice

      # FORK: Multiple choice - the answer is obvious
      - id: enc_obvious_choice
        title: "The Obvious Choice"
        type: fork
        tier: 0
        xp_reward: 5
        intro_text: |
          The Null Cipher conjures a glowing hash before you.

          "When humans must choose a password, many reach for the
          most obvious word imaginable. They think: 'What IS a password?'"

          "And then they type exactly that."

          Which of these is the #1 most common password?
        objective: "Identify the most common password"
        choices:
          - id: choice_password
            label: "password"
            description: "The most literal choice"
            leads_to: enc_sequential_pattern
            is_correct: true
          - id: choice_admin
            label: "admin"
            description: "A system role"
            leads_to: enc_sequential_pattern
            is_correct: false
          - id: choice_letmein
            label: "letmein"
            description: "A request"
            leads_to: enc_sequential_pattern
            is_correct: false
        success_text: |
          "Yes! 'password'—the most common password in history.
          Humans are predictable. This is your advantage."
        failure_text: "Think literally. What IS a password?"
        next_encounter: enc_sequential_pattern

      # FORK: Multiple choice - sequential pattern
      - id: enc_sequential_pattern
        title: "The Sequential Pattern"
        type: fork
        tier: 0
        xp_reward: 5
        intro_text: |
          "Now observe another human tendency," the Null Cipher continues.

          "When forced to use numbers, humans start counting:
          1, 2, 3..."

          "Sequential. Predictable. Exploitable."

          Which sequence is the #2 most common password?
        objective: "Identify the sequential pattern"
        choices:
          - id: choice_123456
            label: "123456"
            description: "Counting up from 1"
            leads_to: enc_keyboard_walk
            is_correct: true
          - id: choice_111111
            label: "111111"
            description: "All the same digit"
            leads_to: enc_keyboard_walk
            is_correct: false
          - id: choice_654321
            label: "654321"
            description: "Counting down"
            leads_to: enc_keyboard_walk
            is_correct: false
        success_text: |
          "'123456'—the second most common password worldwide.
          Sequential patterns are trivially predictable."
        failure_text: "Think about how humans count. Start from 1."
        next_encounter: enc_keyboard_walk

      # BRITTLE: Keyboard walk
      - id: enc_keyboard_walk
        title: "The Keyboard Path"
        type: flash
        tier: 0
        xp_reward: 10
        intro_text: |
          "Final lesson before your awakening," the Null Cipher intones.

          "Some humans don't even THINK—they simply let their fingers
          walk across the keyboard. Top row, left to right..."

          Look at your keyboard. What letters are on the top row?
        objective: "Apply your training - solve without explicit guidance"
        hash: "d8578edf8458ce06fbc5bb76a58c5ca4"
        hash_type: md5
        solution: "qwerty"
        hint: "Top row of your keyboard, left side."
        success_text: |
          "Excellent! 'qwerty'—the keyboard walk pattern."
        failure_text: "Look at your keyboard's top row."
        next_encounter: null

  # =========================================================================
  # CHAPTER 1: THE OUTER GATES
  # Hashtopia-Driven Mode - Passwords from keyspace definitions
  # =========================================================================
  - id: ch_outer_gates
    title: "The Outer Gates"
    description: "Breach the Citadel's first line of defense"
    intro_text: |
      You stand before the Outer Gates of the Dread Citadel.

      The Gatekeeper's challenge awaits—but now you must rely on
      the patterns hidden in the training corpus.

      Use the tools. Analyze the keyspace. Find the patterns.
    outro_text: |
      The Outer Gates crumble. The Gatekeeper falls.

      But this was merely the entrance. Deeper darkness awaits.
    first_encounter: enc_welcome_mat

    encounters:
      # Fixed solution - matches narrative (greeting theme)
      - id: enc_welcome_mat
        title: "The Welcome Mat"
        type: flash
        tier: 1
        xp_reward: 15
        intro_text: |
          A weathered stone guardian blocks your path.

          "Another seeker at my gates? Prove your worth.
          The word you seek is among the most common—
          a greeting, an invitation, an opening."

          This password exists in the training corpus.
          Use wordlist analysis to find it.
        objective: "Crack using wordlist attack"
        solution: "welcome"
        hash_type: md5
        hint: "What do you find on a doormat? A common greeting."
        success_text: |
          The guardian steps aside.

          "'Welcome'—the word on every doormat.
          Simple patterns yield to simple attacks."
        failure_text: "Think about what's written on a doormat."

        variants:
          heroic:
            solution: "welcome1"
            hash_type: sha1
            hint: "A greeting with a simple suffix."
            xp_reward: 25

          mythic:
            solution: "w3lc0me!"
            hash_type: sha256
            hint: "The greeting speaks in tongues of the initiated."
            xp_reward: 35

        next_encounter: enc_root_access

      # KEYSPACE-DRIVEN: Role-based thinking
      - id: enc_root_access
        title: "Root Access"
        type: flash
        tier: 1
        xp_reward: 15
        intro_text: |
          A terminal glows in the darkness.

          "System administrator access required.
          The password reflects the role... the privilege... the power."

          Think about what an administrator would call themselves.
        objective: "Apply role-based password thinking"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD"]
          complexity: simple
          discovery_method: wordlist
          tier: 1
          min_length: 4
          max_length: 6

        hash_type: md5
        hint: "What role does an administrator have?"
        success_text: |
          Access granted.

          "Role-based passwords reveal the user's identity."
        failure_text: "Think about administrator roles."

        variants:
          heroic:
            solution: "admin123"
            hash_type: sha1
            hint: "The role, plus a lazy sequence."
            xp_reward: 25

          mythic:
            solution: "@dm1n!str@t0r"
            hash_type: sha256
            hint: "The full title, corrupted by ancient runes."
            xp_reward: 35

        next_encounter: enc_armory_tour

      # TOUR: Introduction to wordlists
      - id: enc_armory_tour
        title: "The Armory"
        type: tour
        tier: 0
        xp_reward: 10
        intro_text: |
          You discover the Citadel's armory—racks of weapons and tools.

          A spectral quartermaster appears:

          "Welcome, Initiate. Here you'll learn about WORDLISTS—
          collections of common passwords that humans choose.

          The training corpus contains thousands of real passwords.
          When you attack, start with wordlists before trying random guesses.

          Wordlists are FAST because they test likely patterns first."
        objective: "Learn about wordlist attacks"
        success_text: |
          "Remember: wordlists exploit human predictability.
          Most passwords exist in common wordlists."
        next_encounter: enc_repeating_lock

      # FLASH: Pattern recognition drill
      - id: enc_repeating_lock
        title: "The Repeating Lock"
        type: flash
        tier: 1
        xp_reward: 15
        intro_text: |
          A lock mechanism clicks in a repeating pattern.

          "This lock responds to REPETITION—humans often repeat
          characters when forced to make longer passwords."

          The password is 6 characters, repeating a 3-letter pattern.
          Think: abc → abcabc
        objective: "Identify the repeated pattern"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD"]
          complexity: simple
          discovery_method: wordlist
          tier: 1
          min_length: 6
          max_length: 6

        hash_type: md5
        hint: "A short word repeated twice (like 'abcabc')."
        success_text: |
          The lock clicks open.

          "Repetition is a common crutch. Users think 'longer = safer'
          but repeating patterns are trivially predictable."
        failure_text: "Try doubling a common 3-letter word."

        variants:
          heroic:
            solution: "passpass1"
            hash_type: sha1
            hint: "A repeated word with a trailing digit."
            xp_reward: 25

          mythic:
            solution: "p@55p@55!"
            hash_type: sha256
            hint: "The echo speaks in corrupted tongue, sealed with fury."
            xp_reward: 35

        next_encounter: enc_wordsmith_index

      # LOOKUP: Find password in wordlist
      - id: enc_wordsmith_index
        title: "The Wordsmith's Index"
        type: lookup
        tier: 1
        xp_reward: 15
        intro_text: |
          An ancient tome lies open—the Wordsmith's Index.

          "Before cracking, one must LOOK before they LEAP.
          Check if the password exists in your wordlist FIRST."

          Use `patternforge lookup` to search wordlists.
          The password is a common English word meaning 'courage'.
        objective: "Look up the password in your wordlist"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD"]
          complexity: simple
          discovery_method: wordlist
          tier: 1
          min_length: 5
          max_length: 8

        hash_type: md5
        hint: "Use 'patternforge lookup brave' or similar words meaning courage."
        success_text: |
          The tome glows with approval.

          "Lookup before crack—always. It saves time and resources."
        failure_text: "Search for synonyms of 'courage' in the wordlist."

        variants:
          heroic:
            solution: "courage1"
            hash_type: sha1
            hint: "The virtue itself, marked with unity."
            xp_reward: 25

          mythic:
            solution: "br@v3ry!"
            hash_type: sha256
            hint: "Valor encoded in the cipher-tongue of the ancients."
            xp_reward: 35

        next_encounter: enc_loading_cannon

      # WALKTHROUGH: First patternforge crack command
      - id: enc_loading_cannon
        title: "Loading the Cannon"
        type: walkthrough
        tier: 1
        xp_reward: 20
        intro_text: |
          A massive siege cannon looms before you.

          "Now you'll fire your first REAL attack," the quartermaster explains.

          "Use PatternForge to crack this hash:

          `patternforge crack <hash> --wordlist common`

          The 'common' wordlist contains the most frequent passwords.
          This hash hides a simple word—your cannon will find it."
        objective: "Execute your first wordlist crack"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD"]
          complexity: simple
          discovery_method: wordlist
          tier: 1
          min_length: 4
          max_length: 6

        hash_type: md5
        hint: "Run: patternforge crack <hash> --wordlist common"
        success_text: |
          The cannon BOOMS! The wall shatters!

          "Excellent! You've executed your first wordlist attack.
          This is the foundation of all password cracking."
        failure_text: "Copy the hash and run patternforge crack on it."
        next_encounter: enc_gatekeeper

      # KEYSPACE-DRIVEN: Boss encounter with difficulty variants
      - id: enc_gatekeeper
        title: "The Gatekeeper"
        type: flash
        tier: 1
        is_checkpoint: true
        xp_reward: 25
        intro_text: |
          The Gatekeeper rises—a massive iron sentinel.

          "You wish to enter my master's domain?
          Prove you understand the patterns humans leave behind."

          This is a harder challenge. The password follows
          a common pattern: word + digits.
        objective: "Defeat the Gatekeeper using pattern analysis"

        # Normal difficulty keyspace
        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "DIGIT"]
          mask: "?l?l?l?l?l?l?d?d"
          complexity: compound
          discovery_method: mask
          tier: 2
          min_length: 6
          max_length: 10

        hash_type: md5
        hint: "A dictionary word followed by two digits."
        success_text: |
          The Gatekeeper collapses, its iron form rusting to dust.

          "You... have earned passage. The Citadel awaits."
        failure_text: "Analyze the pattern: word + digits."

        # Difficulty variants with scaled keyspaces
        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "YEAR"]
              complexity: compound
              discovery_method: mask
              tier: 3
            hash_type: sha1
            hint: "A word followed by a year."
            xp_reward: 40

          mythic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR"]
              complexity: transformed
              discovery_method: rules
              tier: 4
            hash_type: sha256
            hint: "A transformed word with symbols and year."
            xp_reward: 60

        next_encounter: null

  # =========================================================================
  # CHAPTER 2: THE CRYPTS
  # Advanced Hashtopia-Driven encounters - Mask Mastery
  # =========================================================================
  - id: ch_crypts
    title: "The Crypts"
    description: "Navigate the ancient tombs beneath the Citadel"
    intro_text: |
      Descending into the Crypts, you feel the weight of centuries.

      Here lie the patterns of the ancients—more complex, more varied.
      Your wordlist attacks must evolve into mask attacks and rules.
    outro_text: |
      The Crypt Guardian falls. The inner sanctum beckons.
    first_encounter: enc_mask_merchant

    encounters:
      # TOUR: Introduction to masks
      - id: enc_mask_merchant
        title: "The Mask Merchant"
        type: tour
        tier: 0
        xp_reward: 10
        intro_text: |
          A hooded figure beckons from a shadowy alcove.

          "Greetings, Initiate. I deal in MASKS—patterns that describe
          password structures without knowing the exact characters.

          MASK CHARSETS:
          ◈ ?l = lowercase letter (a-z)
          ◈ ?u = uppercase letter (A-Z)
          ◈ ?d = digit (0-9)
          ◈ ?s = special character (!@#$...)

          A mask like ?l?l?l?l describes any 4-letter lowercase word.
          A mask like ?u?l?l?l?d?d means: Upper, lower, lower, lower, digit, digit."
        objective: "Learn mask syntax"
        success_text: |
          "Masks are the language of pattern attacks.
          Master them, and you'll crack passwords wordlists can't touch."
        next_encounter: enc_first_mask

      # FLASH: First mask recognition
      - id: enc_first_mask
        title: "The Four-Letter Lock"
        type: flash
        tier: 1
        xp_reward: 15
        intro_text: |
          A simple lock glows with runic symbols.

          "This lock requires exactly 4 lowercase letters.
          The mask is: ?l?l?l?l

          Think of common 4-letter words..."
        objective: "Identify the 4-letter lowercase pattern"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD"]
          complexity: simple
          discovery_method: mask
          tier: 1
          min_length: 4
          max_length: 4

        hash_type: md5
        hint: "Four lowercase letters. Think: love, pass, word, test..."
        success_text: |
          The lock clicks open.

          "Simple masks for simple patterns. Now let's add complexity."
        failure_text: "Try common 4-letter lowercase words."

        variants:
          heroic:
            solution: "Love99"
            hash_type: sha1
            hint: "A feeling, capitalized, followed by doubles."
            xp_reward: 25

          mythic:
            solution: "l0v3!"
            hash_type: sha256
            hint: "The heart speaks in numbers now."
            xp_reward: 35

        next_encounter: enc_number_lock

      # FLASH: Digit-only mask
      - id: enc_number_lock
        title: "The Number Lock"
        type: flash
        tier: 1
        xp_reward: 15
        intro_text: |
          A mechanical safe with spinning number wheels.

          "This vault requires exactly 4 DIGITS.
          The mask is: ?d?d?d?d

          Think of common 4-digit patterns humans choose..."
        objective: "Crack the 4-digit code"

        keyspace:
          source: "training_corpus"
          tokens: ["DIGIT"]
          complexity: simple
          discovery_method: mask
          tier: 1
          min_length: 4
          max_length: 4

        hash_type: md5
        hint: "Four digits. Humans love sequences: 1234, 0000, 1111..."
        success_text: |
          The safe swings open.

          "Digit-only passwords are absurdly weak—
          only 10,000 possible combinations for 4 digits."
        failure_text: "Try common PIN patterns."

        variants:
          heroic:
            solution: "123456"
            hash_type: sha1
            hint: "The sequence extends. Keep counting."
            xp_reward: 25

          mythic:
            solution: "31337"
            hash_type: sha256
            hint: "The elite know this number well."
            xp_reward: 35

        next_encounter: enc_speed_id

      # RACE: Timed mask identification
      - id: enc_speed_id
        title: "Speed Identification"
        type: race
        tier: 2
        xp_reward: 25
        expected_time: 60
        intro_text: |
          An hourglass appears, sand already flowing!

          "QUICK! You have 60 SECONDS to crack these hashes.
          Each follows a simple mask pattern.

          First hash: ?l?l?l?l?l (5 lowercase letters)

          MOVE FAST!"
        objective: "Crack 5 hashes in 60 seconds"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD"]
          complexity: simple
          discovery_method: mask
          tier: 2
          min_length: 5
          max_length: 5

        hash_type: md5
        hint: "5 lowercase letters. Common words: apple, money, magic..."
        success_text: |
          You beat the clock!

          "Speed comes with practice. Pattern recognition becomes instinct."
        failure_text: "Too slow! Practice your mask attacks."

        variants:
          heroic:
            expected_time: 45
            hash_type: sha1
            hint: "Less time. More pressure. Think fast."
            xp_reward: 40

          mythic:
            expected_time: 30
            hash_type: sha256
            hint: "The sand falls faster in the shadow realm."
            xp_reward: 60

        next_encounter: enc_mask_basics

      # WALKTHROUGH: First mask attack
      - id: enc_mask_basics
        title: "Mask Attack Basics"
        type: walkthrough
        tier: 2
        xp_reward: 20
        intro_text: |
          The Mask Merchant produces a complex lock.

          "Now execute a REAL mask attack:

          `patternforge crack <hash> --mask ?l?l?l?l?d?d`

          This mask describes: 4 letters + 2 digits
          (like 'pass12' or 'word99')

          Masks test ALL combinations matching the pattern."
        objective: "Execute a mask attack"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "DIGIT"]
          complexity: compound
          discovery_method: mask
          tier: 2
          min_length: 6
          max_length: 6

        hash_type: md5
        hint: "Run: patternforge crack <hash> --mask ?l?l?l?l?d?d"
        success_text: |
          The lock shatters!

          "Excellent! Mask attacks are EXHAUSTIVE—they try every combination.
          This makes them slower but guaranteed to find matches."
        failure_text: "Use the mask flag: --mask ?l?l?l?l?d?d"
        next_encounter: enc_mixed_patterns

      # FLASH: Complex mixed mask
      - id: enc_mixed_patterns
        title: "Mixed Patterns"
        type: flash
        tier: 2
        xp_reward: 20
        intro_text: |
          A vault door displays a complex pattern:

          "This password uses MIXED character types:
          ◈ Starts with uppercase (capital letter)
          ◈ Middle is lowercase
          ◈ Ends with digits

          The mask: ?u?l?l?l?d?d (Upper + 3 lower + 2 digits)"
        objective: "Crack the mixed-character pattern"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "DIGIT"]
          mask: "?u?l?l?l?d?d"
          complexity: compound
          discovery_method: mask
          tier: 2
          min_length: 6
          max_length: 6

        hash_type: md5
        hint: "Capital + 3 lowercase + 2 digits. Like 'Pass12' or 'Word99'."
        success_text: |
          The vault opens.

          "Corporate passwords often follow this exact pattern—
          capital first, lowercase, then numbers at the end."
        failure_text: "Think: Capital letter + word + two digits"

        variants:
          heroic:
            solution: "Admin2024"
            hash_type: sha1
            hint: "A role, marked by the year of reckoning."
            xp_reward: 35

          mythic:
            solution: "P@55w0rd!"
            hash_type: sha256
            hint: "The obvious choice, dressed in corrupted regalia."
            xp_reward: 50

        next_encounter: enc_find_pattern

      # HUNT: Open exploration
      - id: enc_find_pattern
        title: "Find the Pattern"
        type: hunt
        tier: 3
        xp_reward: 30
        intro_text: |
          A complex mechanism with no obvious clues.

          "This one has NO HINTS. You must DISCOVER the pattern yourself.

          Analyze the hash. Try different masks. Use your tools:
          ◈ `patternforge analyze <hash>` - examine structure
          ◈ `patternforge identify <hash>` - identify hash type

          The pattern is hidden. Hunt for it."
        objective: "Discover and crack the hidden pattern"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "YEAR"]
          complexity: compound
          discovery_method: mask
          tier: 3
          min_length: 8
          max_length: 8

        hash_type: md5
        hint: "Try analyzing with patternforge. Common patterns: word+year, name+digits..."
        success_text: |
          You found it through exploration!

          "The HUNT teaches you to discover patterns independently.
          In real scenarios, you won't have hints—only your tools and instincts."
        failure_text: "Keep exploring. Try word+year patterns."

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "YEAR", "SYMBOL"]
              complexity: compound
              discovery_method: mask
              tier: 4
            hash_type: sha1
            hint: "The pattern grows. A symbol lurks at the end."
            xp_reward: 50

          mythic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR"]
              complexity: transformed
              discovery_method: rules
              tier: 5
            hash_type: sha256
            hint: "No clues remain. Only your instincts and the void."
            xp_reward: 75

        next_encounter: enc_name_game

      # KEYSPACE-DRIVEN: Name + Year pattern (Tier 3)
      - id: enc_name_game
        title: "The Name Game"
        type: flash
        tier: 3
        xp_reward: 20
        intro_text: |
          Ghostly inscriptions cover the walls.

          "Here lie passwords of the personal kind—
          names combined with years, a pattern as old as memory."

          The pattern is: Capitalized name + 4-digit year.
          Use mask attack: ?u?l?l?l?d?d?d?d
        objective: "Crack Name+Year pattern using masks"

        keyspace:
          source: "training_corpus"
          mask: "?u?l?l?l?d?d?d?d"
          tokens: ["WORD", "YEAR"]
          complexity: compound
          discovery_method: mask
          tier: 3
          min_length: 8
          max_length: 12

        hash_type: md5
        hint: "Capitalized name + 4-digit year (like John2024)."
        success_text: |
          The inscription fades.

          "Name+Year—one of the most common patterns in corporate environments."
        failure_text: "Try a mask attack for capitalized name + year."

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "YEAR"]
              mask: "?u?l?l?l?l?d?d?d?d"
              complexity: compound
              discovery_method: mask
              tier: 3
            hash_type: sha1
            hint: "5-letter name + 4-digit year."
            xp_reward: 35

          mythic:
            keyspace:
              source: "training_corpus"
              complexity: transformed
              discovery_method: rules
              tier: 4
            hash_type: sha256
            hint: "Transformed name+year with leet speak."
            xp_reward: 50

        next_encounter: enc_build_first_mask

      # CRAFT: Build your first mask
      - id: enc_build_first_mask
        title: "Build Your First Mask"
        type: craft
        tier: 2
        xp_reward: 25
        intro_text: |
          The Mask Merchant presents a crafting station.

          "Now YOU will BUILD a mask from scratch.

          Your target: A 6-character password that follows this pattern:
          ◈ 4 lowercase letters
          ◈ 2 digits at the end

          Use the CRAFT interface to assemble: ?l?l?l?l?d?d"
        objective: "Construct the mask pattern"
        solution: "?l?l?l?l?d?d"
        hint: "Four ?l slots, then two ?d slots."
        success_text: |
          Perfect construction!

          "You've mastered the basics of mask building.
          Now you can DESCRIBE any password pattern."
        failure_text: "Remember: ?l = lowercase, ?d = digit"
        next_encounter: enc_crypt_guardian

      # KEYSPACE-DRIVEN: Boss with leet patterns
      - id: enc_crypt_guardian
        title: "The Crypt Guardian"
        type: flash
        tier: 2
        is_checkpoint: true
        xp_reward: 30
        intro_text: |
          The Crypt Guardian awakens—bones reforming into a towering sentinel.

          "You dare disturb my eternal rest?
          Decode the secrets of the transformed..."

          This password uses leet speak transformations.
          Rules are your weapon here.
        objective: "Defeat using rule-based attack"

        keyspace:
          source: "training_corpus"
          complexity: simple
          discovery_method: wordlist
          tier: 2
          min_length: 4
          max_length: 8

        hash_type: md5
        hint: "A common word, possibly with basic substitutions."
        success_text: |
          The Guardian crumbles to dust.

          "Rules transform the predictable into the seemingly complex."
        failure_text: "Try rule-based transformations on common words."

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              complexity: compound
              discovery_method: rules
              tier: 3
            hash_type: sha1
            hint: "Word with leet substitutions."
            xp_reward: 50

          mythic:
            keyspace:
              source: "training_corpus"
              complexity: transformed
              discovery_method: pipeline
              tier: 5
            hash_type: sha256
            hint: "Complex transformation pipeline required."
            xp_reward: 75

        next_encounter: null

  # =========================================================================
  # CHAPTER 3: THE INNER SANCTUM
  # Rule Mastery - Transform, Repair, Duel
  # =========================================================================
  - id: ch_inner_sanctum
    title: "The Inner Sanctum"
    description: "Master the art of rule-based attacks"
    intro_text: |
      The Inner Sanctum—heart of the Dread Citadel.

      Here the patterns converge. You'll learn the power of RULES—
      transformations that turn simple words into complex passwords.

      Leet speak. Capitalization. Appending. Toggling.
      The dark arts of password mutation.
    outro_text: |
      The Citadel Lord falls. Victory is yours.
    first_encounter: enc_rule_codex

    encounters:
      # TOUR: Introduction to rules
      - id: enc_rule_codex
        title: "The Rule Codex"
        type: tour
        tier: 0
        xp_reward: 10
        intro_text: |
          A massive tome floats before you—The Rule Codex.

          "RULES transform passwords," a voice intones.

          COMMON TRANSFORMATIONS:
          ◈ l33t speak: e→3, a→@, o→0, i→1
          ◈ Capitalize: password → Password
          ◈ Append digits: word → word123
          ◈ Toggle case: password → pAsSwOrD

          "Rules let you crack passwords that LOOK complex
          but are actually simple words... transformed."
        objective: "Learn the rule system"
        success_text: |
          "Rules are the key to defeating 'clever' passwords."
        next_encounter: enc_simple_transforms

      # FLASH: Recognize leet speak
      - id: enc_simple_transforms
        title: "Simple Transforms"
        type: flash
        tier: 2
        xp_reward: 20
        intro_text: |
          A locked chest displays strange runes.

          "This password uses L33T SPEAK—character substitutions.
          Common patterns:
          ◈ a → @ or 4
          ◈ e → 3
          ◈ i → 1
          ◈ o → 0
          ◈ s → 5 or $

          The original word is 'password'... but transformed."
        objective: "Crack the leet-speak password"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD"]
          complexity: simple
          discovery_method: rules
          tier: 2
          min_length: 6
          max_length: 10

        hash_type: md5
        hint: "Think: p@55w0rd, p4ssw0rd, passw0rd..."
        success_text: |
          The chest opens.

          "Leet speak is trivially predictable.
          Rule-based attacks test all common substitutions."
        failure_text: "Apply leet substitutions to common words."

        variants:
          heroic:
            solution: "p@$$w0rd123"
            hash_type: sha1
            hint: "The classic, fully corrupted, with a sequence at the end."
            xp_reward: 35

          mythic:
            solution: "P@$$W0RD!@#"
            hash_type: sha256
            hint: "Screaming in corrupted tongues, sealed with symbols of power."
            xp_reward: 50

        next_encounter: enc_fix_broken_rule

      # REPAIR: Fix broken rule syntax - simplified
      - id: enc_fix_broken_rule
        title: "Fix the Broken Rule"
        type: flash
        tier: 2
        xp_reward: 25
        intro_text: |
          A damaged scroll shows a broken command:

          BROKEN: `pf crack hash --rules best64.rul`

          What's MISSING? The command needs a wordlist!

          PATTERN: `pf crack <hash> --wordlist ??? --rules best64`

          Type the missing wordlist name: common
        objective: "What wordlist is missing?"
        solution: "common"
        hint: "The most basic wordlist is called 'common'"
        success_text: |
          The scroll repairs itself.

          "Rules TRANSFORM wordlists. No wordlist = no attack.
          The full command: patternforge crack <hash> --wordlist common --rules best64"
        failure_text: "What's the name of the basic wordlist? (Hint: it's common)"
        next_encounter: enc_first_rule_attack

      # WALKTHROUGH: First rule attack
      - id: enc_first_rule_attack
        title: "Your First Rule Attack"
        type: walkthrough
        tier: 2
        xp_reward: 20
        intro_text: |
          A training dummy awaits your attack.

          "Execute a RULE-BASED attack:

          `patternforge crack <hash> --wordlist common --rules best64`

          The 'best64' ruleset applies the 64 most effective
          transformations to every word in your wordlist.

          One wordlist + rules = MILLIONS of candidates."
        objective: "Execute a rule-based attack"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD"]
          complexity: simple
          discovery_method: rules
          tier: 2
          min_length: 6
          max_length: 8

        hash_type: md5
        hint: "Run: patternforge crack <hash> --wordlist common --rules best64"
        success_text: |
          The dummy shatters!

          "Rules multiply your wordlist's power exponentially."
        failure_text: "Use the --rules flag with best64."
        next_encounter: enc_craft_rule

      # CRAFT: Create a custom mask (NOTE: This is a MASK, not a rule)
      - id: enc_craft_rule
        title: "Forge a Mask"
        type: craft
        tier: 3
        xp_reward: 30
        intro_text: |
          The Mask Forge glows with potential.

          "Create a MASK pattern describing:

          ◈ 1 Uppercase letter (?u)
          ◈ 3 lowercase letters (?l?l?l)
          ◈ 2 digits (?d?d)

          Build: ?u?l?l?l?d?d
          Matches: Pass12, Word99, Jake23"
        objective: "Construct the mask pattern"
        solution: "?u?l?l?l?d?d"
        hint: "Use the CRAFT panel: U L L L D D"
        success_text: |
          The Mask Forge accepts your creation!

          "Masks let you target SPECIFIC password structures."
        failure_text: "Use the CRAFT panel: click U, then L L L, then D D"
        next_encounter: enc_best_vs_dive

      # DUEL: Compare attack strategies
      - id: enc_best_vs_dive
        title: "Best64 vs Dive"
        type: duel
        tier: 3
        xp_reward: 25
        intro_text: |
          Two paths diverge before you.

          PATH A: best64 ruleset
          ◈ 64 most common transformations
          ◈ Fast but limited coverage
          ◈ Good for quick cracks

          PATH B: dive ruleset
          ◈ 99,000+ transformations
          ◈ Slow but thorough
          ◈ Catches obscure patterns

          Which strategy for a QUICK recon?
        objective: "Choose the better strategy"
        choices:
          - id: choice_best64
            label: "best64 - Speed"
            description: "Fast 64-rule attack for quick results"
            leads_to: enc_predict_transform
            is_correct: true
          - id: choice_dive
            label: "dive - Thorough"
            description: "99K rules for maximum coverage"
            leads_to: enc_predict_transform
            is_correct: false
        success_text: |
          "Correct! For quick recon, speed wins.
          Save thorough attacks for when fast ones fail."
        failure_text: "Think about the goal: QUICK recon means FAST attack."
        next_encounter: enc_predict_transform

      # FLASH: Predict rule output
      - id: enc_predict_transform
        title: "Predict the Transform"
        type: flash
        tier: 3
        xp_reward: 20
        intro_text: |
          A test appears:

          "Given the word 'admin' and the rule 'c$1$2$3':
          ◈ c = capitalize first letter
          ◈ $1 = append '1'
          ◈ $2 = append '2'
          ◈ $3 = append '3'

          What is the OUTPUT?"
        objective: "Predict the rule transformation result"
        solution: "Admin123"
        hint: "c = capitalize → Admin. Then append 1, 2, 3..."
        success_text: |
          "Correct! Admin123.
          Understanding rules means predicting outputs."
        failure_text: "Apply each rule step: capitalize, then append 1, 2, 3."

        variants:
          heroic:
            intro_text: |
              A more complex test appears:

              "Given 'password' and rules 'c so0 sa@ $!'":
              ◈ c = capitalize first
              ◈ so0 = replace o with 0
              ◈ sa@ = replace a with @
              ◈ $! = append '!'

              What is the OUTPUT?"
            solution: "P@ssw0rd!"
            hint: "Apply each rule in order: capitalize, then substitutions, then append."
            xp_reward: 35

          mythic:
            intro_text: |
              The ultimate transformation test:

              "Given 'security' and rules 'c se3 si1 su@ $2024'":
              ◈ c = capitalize first
              ◈ se3 = replace e with 3
              ◈ si1 = replace i with 1
              ◈ su@ = replace u with @
              ◈ $2024 = append '2024'

              What is the OUTPUT?"
            solution: "S3c@r1ty2024"
            hint: "Each vowel transforms. The year follows."
            xp_reward: 50

        next_encounter: enc_reverse_engineer

      # HUNT: Reverse engineer a password
      - id: enc_reverse_engineer
        title: "Reverse Engineer"
        type: hunt
        tier: 3
        xp_reward: 30
        intro_text: |
          You find a cracked password: "P@55w0rd!"

          "Work BACKWARDS. What was the ORIGINAL word
          before transformations were applied?

          Reverse the leet speak:
          ◈ @ → a
          ◈ 5 → s
          ◈ 0 → o

          Remove the trailing symbol."
        objective: "Find the original word"
        solution: "password"
        hint: "Replace @ with a, 5 with s, 0 with o. Remove the !."
        success_text: |
          "Password! The most common word, dressed up to look 'secure'."
        failure_text: "Reverse each leet substitution step by step."

        variants:
          heroic:
            intro_text: |
              You find a cracked password: "$3cur1ty2024!"

              "Work BACKWARDS. Identify the ORIGINAL word.

              ◈ 3 → e
              ◈ 1 → i
              ◈ Remove the year and symbol."
            solution: "security"
            hint: "Replace 3 with e, 1 with i. The year and ! are decorations."
            xp_reward: 50

          mythic:
            intro_text: |
              You find a cracked password: "@dM1n!$+r@+0R#2025"

              "A complex transformation. Find the ROOT WORD."
            solution: "administrator"
            hint: "Strip all corruption. What role hides beneath?"
            xp_reward: 75

        next_encounter: enc_gambit_big_list

      # GAMBIT: Risk/reward choice
      - id: enc_gambit_big_list
        title: "Risk the Big List?"
        type: gambit
        tier: 3
        xp_reward: 25
        intro_text: |
          A fork in your path. Two wordlists available:

          SAFE PATH: rockyou.txt (14 million words)
          ◈ Fast - seconds to minutes
          ◈ Good coverage of common passwords
          ◈ Guaranteed to finish

          RISKY PATH: hashesorg2019.txt (1.4 billion words)
          ◈ Slow - could take hours
          ◈ Massive coverage
          ◈ Might timeout

          You have LIMITED TIME. Which path?
        objective: "Choose your attack strategy"
        choices:
          - id: choice_safe
            label: "Safe - rockyou.txt"
            description: "14M words, fast and reliable"
            leads_to: enc_left_hand
            is_correct: true
          - id: choice_risky
            label: "Risky - hashesorg"
            description: "1.4B words, thorough but slow"
            leads_to: enc_left_hand
            is_correct: false
        success_text: |
          "Wise choice. Start fast, escalate if needed."
        failure_text: "Time constraints matter. Sometimes speed beats coverage."
        next_encounter: enc_left_hand

      # BOSS: The Left Hand
      - id: enc_left_hand
        title: "The Left Hand"
        type: flash
        tier: 4
        is_checkpoint: true
        xp_reward: 40
        intro_text: |
          The Left Hand of the Citadel Lord rises.

          "I am the guardian of COMPLEXITY.
          My password combines rules AND masks.

          Pattern: Capitalized word + leet transformations + year

          Example: P@ssword2024"
        objective: "Defeat the Left Hand"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "YEAR"]
          complexity: compound
          discovery_method: rules
          tier: 4
          min_length: 10
          max_length: 14

        hash_type: md5
        hint: "Use rules on a word, then append a year. Try: --rules best64"
        success_text: |
          The Left Hand crumbles.

          "You... have mastered transformation. The Lord awaits."
        failure_text: "Combine wordlist attack with rules and year appending."

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR"]
              complexity: transformed
              discovery_method: rules
              tier: 5
            hash_type: sha1
            hint: "Word, symbol, year—fully transformed. The Left Hand strikes harder."
            xp_reward: 65

          mythic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR"]
              complexity: transformed
              discovery_method: pipeline
              tier: 6
            hash_type: sha256
            hint: "The Left Hand reveals its true form. Full arsenal required."
            xp_reward: 100

        next_encounter: enc_right_hand

      # BOSS: The Right Hand
      - id: enc_right_hand
        title: "The Right Hand"
        type: flash
        tier: 4
        is_checkpoint: true
        xp_reward: 40
        intro_text: |
          The Right Hand emerges from shadow.

          "I guard the path of PATTERN.
          My password follows a strict structure.

          Mask: ?u?l?l?l?l?d?d?d?d (Name + Year format)

          But the name uses leet substitutions..."
        objective: "Defeat the Right Hand"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "YEAR"]
          mask: "?u?l?l?l?l?d?d?d?d"
          complexity: compound
          discovery_method: mask
          tier: 4
          min_length: 9
          max_length: 9

        hash_type: md5
        hint: "5-letter capitalized word + 4-digit year. Try name+year patterns."
        success_text: |
          The Right Hand falls.

          "Both guardians defeated. The throne room opens..."
        failure_text: "Use a mask attack: ?u?l?l?l?l?d?d?d?d"

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR"]
              complexity: compound
              discovery_method: mask
              tier: 5
            hash_type: sha1
            hint: "The pattern shifts. A symbol divides word from year."
            xp_reward: 65

          mythic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR"]
              complexity: transformed
              discovery_method: pipeline
              tier: 6
            hash_type: sha256
            hint: "The Right Hand strikes from shadow. Pattern recognition fails. Instinct prevails."
            xp_reward: 100

        next_encounter: enc_citadel_lord

      # BOSS: The Citadel Lord (Midpoint Boss)
      - id: enc_citadel_lord
        title: "The Citadel Lord"
        type: flash
        tier: 5
        is_checkpoint: true
        xp_reward: 75
        intro_text: |
          The Citadel Lord descends from his obsidian throne.

          "So, you've defeated my guardians.
          But can you crack MY password?

          I use EVERYTHING:
          ◈ Wordlist base
          ◈ Rule transformations
          ◈ Mask structure
          ◈ Year appending

          Show me you understand the FULL ARSENAL."
        objective: "Defeat the Citadel Lord"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "DIGIT"]
          complexity: compound
          discovery_method: pipeline
          tier: 5
          min_length: 8
          max_length: 14

        hash_type: md5
        hint: "Combine everything: wordlist + rules + mask. A compound pattern."
        success_text: |
          The Citadel Lord falls to his knees.

          "You... you see the patterns. But there is MORE to learn.

          Beyond these walls lie the Archive of Souls—
          where true understanding awaits.

          Go. Learn to ANALYZE before you attack."
        failure_text: "Use your full arsenal: wordlists, masks, AND rules together."

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              complexity: compound
              discovery_method: rules
              tier: 3
            hash_type: sha1
            hint: "Transformed compound pattern."
            xp_reward: 100

          mythic:
            keyspace:
              source: "training_corpus"
              complexity: transformed
              discovery_method: pipeline
              tier: 5
            hash_type: sha256
            hint: "Full attack pipeline required."
            xp_reward: 150

        next_encounter: null

  # =========================================================================
  # CHAPTER 4: ARCHIVE OF SOULS
  # SCARAB Corpus Analysis - Learning to analyze before attacking
  # =========================================================================
  - id: ch_archive_souls
    title: "Archive of Souls"
    description: "Master corpus analysis with SCARAB"
    intro_text: |
      Beyond the Inner Sanctum lies the Archive of Souls.

      Here, the memories of millions of passwords are stored—
      a corpus of human predictability waiting to be analyzed.

      You'll learn SCARAB: the pattern analysis engine.
      Observe. Analyze. Understand. Then attack.
    outro_text: |
      The Archive yields its secrets. You understand the patterns.
    first_encounter: enc_memory_keeper

    encounters:
      # TOUR: Introduction to corpus analysis
      - id: enc_memory_keeper
        title: "The Memory Keeper"
        type: tour
        tier: 0
        xp_reward: 10
        intro_text: |
          A spectral librarian materializes among towering shelves.
          On her shoulder, a golden beetle pulses with arcane light.

          "Welcome to the Archive. I am the Memory Keeper,
          and this is SCARAB—my pattern-seeking familiar.

          The beetle feeds on password corpuses, digesting them
          into pure pattern intelligence.

          SCARAB reveals:
          ◈ Token frequency (WORD, DIGIT, YEAR, SYMBOL)
          ◈ Pattern distribution (word+digits, Name+year)
          ◈ Character position statistics
          ◈ Common substitutions and transforms

          Understand the corpus. Craft better attacks."
        objective: "Learn about corpus analysis"
        success_text: |
          "The Archive contains wisdom. Let me show you how to extract it."
        next_encounter: enc_feed_scarab

      # WALKTHROUGH: First ingest command
      - id: enc_feed_scarab
        title: "Feeding SCARAB"
        type: walkthrough
        tier: 2
        xp_reward: 20
        intro_text: |
          The golden beetle clicks its mandibles expectantly.

          "SCARAB hungers for data. Feed it a corpus:

          `patternforge ingest corpus.txt --name training`

          Watch the beetle consume each password,
          extracting patterns from the chaos."
        objective: "Feed the corpus to SCARAB"
        solution: "patternforge ingest corpus.txt --name training"
        hint: "Run: patternforge ingest corpus.txt --name training"
        success_text: |
          SCARAB's carapace glows as it devours the data.
          Thousands of passwords, digested in seconds.

          "The beetle is satisfied. Now it will reveal what it learned."
        failure_text: "Use the ingest command with a corpus file."
        next_encounter: enc_token_recognition

      # HUNT: Identify token types
      - id: enc_token_recognition
        title: "Token Recognition"
        type: hunt
        tier: 2
        xp_reward: 25
        intro_text: |
          Analysis output scrolls before you.

          "SCARAB categorizes passwords into TOKENS:

          ◈ WORD: alphabetic sequences (password, admin)
          ◈ DIGIT: numeric sequences (123, 99)
          ◈ YEAR: 4-digit years (2024, 1990)
          ◈ SYMBOL: special characters (!@#$)

          Examine this password: 'Admin2024!'

          What tokens does it contain?"
        objective: "Identify the token types"
        solution: "WORD YEAR SYMBOL"
        hint: "Admin = WORD, 2024 = YEAR, ! = SYMBOL"
        success_text: |
          "Correct! WORD + YEAR + SYMBOL.
          Token recognition is the foundation of pattern analysis."
        failure_text: "Break down each part: Admin, 2024, !"

        variants:
          heroic:
            intro_text: |
              A more complex password: 'P@55w0rd#2024!'

              "Some tokens are TRANSFORMED. Look past the corruption.
              What are the BASE token types?"
            solution: "WORD SYMBOL YEAR SYMBOL"
            hint: "P@55w0rd = transformed WORD, # = SYMBOL, 2024 = YEAR, ! = SYMBOL"
            xp_reward: 40

          mythic:
            intro_text: |
              The ultimate test: 'R00t@Dm1n!$+r@+0R#2025!@#'

              "Chaos and corruption. Find the underlying pattern."
            solution: "WORD WORD SYMBOL YEAR SYMBOL"
            hint: "Two transformed words, a symbol, a year, then more symbols."
            xp_reward: 60

        next_encounter: enc_pattern_stats

      # FLASH: Read frequency output
      - id: enc_pattern_stats
        title: "Pattern Statistics"
        type: flash
        tier: 2
        xp_reward: 20
        intro_text: |
          SCARAB displays analysis results:

          PATTERN FREQUENCY:
          ► word+digits    34.2%  ◄ HIGHEST
            Word+year      22.1%
            word+symbol    15.8%
            word           12.4%
            digits         10.2%

          "Attack the MOST COMMON pattern first.
          Type the pattern name exactly as shown above."
        objective: "Which pattern has the highest frequency?"
        solution: "word+digits"
        hint: "Look for the highest percentage. Type it exactly: word+digits"
        success_text: |
          "Always attack high-frequency patterns first.
          Maximum coverage with minimum effort."
        failure_text: "Type the pattern name: word+digits (the 34.2% one)"

        variants:
          heroic:
            intro_text: |
              A new corpus yields different results:

              PATTERN FREQUENCY:
                word+digits     18.3%
              ► Word+year+sym   31.7%  ◄ HIGHEST
                word+symbol     24.1%
                Name+year       15.4%
                digits          10.5%

              "This is a CORPORATE corpus. Which pattern dominates?"
            solution: "Word+year+sym"
            hint: "Look for the highest percentage. Type exactly as shown."
            xp_reward: 35

          mythic:
            intro_text: |
              An encrypted corpus reveals chaos:

              PATTERN FREQUENCY:
                word+digits     12.1%
                Word+year       18.9%
              ► L33T+symbol+yr  28.4%  ◄ HIGHEST
                Name+sym+year   22.3%
                pure_random     18.3%

              "The corrupted speak loudest. What pattern rules?"
            solution: "L33T+symbol+yr"
            hint: "Corruption prevails. Type the exact pattern name."
            xp_reward: 50

        next_encounter: enc_watch_scarab

      # SIEGE: Progressive analysis observation
      - id: enc_watch_scarab
        title: "Watch SCARAB Work"
        type: siege
        tier: 3
        xp_reward: 30
        intro_text: |
          The beetle unfolds crystalline wings, projecting data.

          "Watch SCARAB's analysis ritual unfold.
          Each phase reveals deeper pattern wisdom.

          The beetle works methodically. Patience."
        objective: "Observe the beetle's analysis"
        success_text: |
          "You've witnessed the full cycle.
          Analysis before action. Always."
        failure_text: "Watch the output. Press SPACE when prompted."
        next_encounter: enc_full_analysis

      # WALKTHROUGH: Full analysis command
      - id: enc_full_analysis
        title: "Full Analysis Run"
        type: walkthrough
        tier: 3
        xp_reward: 25
        intro_text: |
          The terminal awaits your command.

          "Execute a COMPLETE analysis:

          `patternforge analyze --corpus training --output report.json`

          This generates a full pattern report."
        objective: "Run complete analysis"
        solution: "patternforge analyze --corpus training --output report.json"
        hint: "Run: patternforge analyze --corpus training --output report.json"
        success_text: |
          Report generated. Patterns documented.

          "Now you have intelligence. Use it wisely."
        failure_text: "Include --corpus and --output flags."
        next_encounter: enc_build_from_analysis

      # CRAFT: Build attack from analysis
      - id: enc_build_from_analysis
        title: "Build Attack from Analysis"
        type: craft
        tier: 3
        xp_reward: 30
        intro_text: |
          SCARAB's report shows the dominant pattern:

          "word+digits (6 letters + 2 digits)"

          Build a MASK that matches this pattern:
          ◈ 6 lowercase letters
          ◈ 2 digits

          Construct: ?l?l?l?l?l?l?d?d
        objective: "Build a mask from analysis"
        solution: "?l?l?l?l?l?l?d?d"
        hint: "Six ?l for letters, two ?d for digits."
        success_text: |
          Perfect mask construction!

          "Analysis → Mask → Attack. The complete workflow."
        failure_text: "Remember: ?l = lowercase, ?d = digit"
        next_encounter: enc_locked_memory

      # FLASH: Pattern-based password
      - id: enc_locked_memory
        title: "The Locked Memory"
        type: flash
        tier: 4
        xp_reward: 35
        intro_text: |
          A sealed vault contains ancient passwords.

          The beetle reveals: "Pattern = word + year"

          Analysis suggests: a 4-letter word + 4-digit year.
          Common in corporate environments.

          Try: born2003
        objective: "Apply the pattern analysis"
        solution: "born2003"
        hash_type: md5
        hint: "The password is born2003 (word + year pattern)"
        success_text: |
          The vault unseals.

          "Pattern recognition + wordlist = cracked.
          You've mastered corpus analysis."
        failure_text: "The pattern is word+year. Try: born2003"

        variants:
          heroic:
            solution: "Born2003!"
            hash_type: sha1
            hint: "The memory awakens—capitalized, dated, punctuated."
            xp_reward: 55

          mythic:
            solution: "b0rn#2003!"
            hash_type: sha256
            hint: "The locked memory speaks in tongues of the ancients."
            xp_reward: 80

        next_encounter: enc_which_corpus

      # FORK: Corpus selection
      - id: enc_which_corpus
        title: "Which Corpus?"
        type: fork
        tier: 3
        xp_reward: 20
        intro_text: |
          Two corpuses available for analysis:

          CORPORATE CORPUS:
          ◈ 50,000 passwords from enterprise breaches
          ◈ Formal patterns (Name+year, department codes)
          ◈ Policy-influenced (8+ chars, mixed case required)

          GAMING CORPUS:
          ◈ 100,000 passwords from gaming sites
          ◈ Casual patterns (leetspeak, nicknames)
          ◈ No strict requirements

          Your target is a CORPORATE database. Which corpus?
        objective: "Choose the right corpus"
        choices:
          - id: choice_corporate
            label: "Corporate Corpus"
            description: "Enterprise passwords match enterprise targets"
            leads_to: enc_archive_keeper
            is_correct: true
          - id: choice_gaming
            label: "Gaming Corpus"
            description: "Larger but different demographic"
            leads_to: enc_archive_keeper
            is_correct: false
        success_text: |
          "Correct! Match your corpus to your target.
          Corporate patterns differ from casual ones."
        failure_text: "Target demographics matter. Corporate targets need corporate patterns."
        next_encounter: enc_archive_keeper

      # BOSS: Archive Keeper
      - id: enc_archive_keeper
        title: "Archive Keeper"
        type: flash
        tier: 5
        is_checkpoint: true
        xp_reward: 50
        intro_text: |
          The Archive Keeper manifests—a towering spectral figure.

          "You seek to master the Archive?
          Prove you understand the FULL WORKFLOW:

          Analysis → Pattern Recognition → Targeted Attack

          My password follows corporate patterns:
          Capitalized word + year"
        objective: "Defeat the Archive Keeper"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "YEAR"]
          mask: "?u?l?l?l?l?d?d?d?d"
          complexity: compound
          discovery_method: pipeline
          tier: 5
          min_length: 9
          max_length: 9

        hash_type: md5
        hint: "Corporate pattern: Name2024 format. Use mask ?u?l?l?l?l?d?d?d?d"
        success_text: |
          The Archive Keeper bows.

          "You have mastered analysis. The Archive is yours.
          Now... deeper secrets await in the Forge."
        failure_text: "Apply what you learned: analyze, identify pattern, attack."

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR"]
              complexity: transformed
              discovery_method: pipeline
              tier: 5
            hash_type: sha1
            hint: "The Keeper reveals hidden depths. Word, symbol, year—transformed."
            xp_reward: 80

          mythic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR"]
              complexity: transformed
              discovery_method: pipeline
              tier: 6
            hash_type: sha256
            hint: "The Archive contains all patterns. The Keeper guards the deepest."
            xp_reward: 125

        next_encounter: null

  # =========================================================================
  # CHAPTER 5: THE FORGE ETERNAL
  # EntropySmith Password Generation - Create and understand password patterns
  # =========================================================================
  - id: ch_forge_eternal
    title: "The Forge Eternal"
    description: "Master password generation with EntropySmith"
    intro_text: |
      Beyond the Archive lies the Forge Eternal.

      Here, passwords are CREATED, not just cracked.
      You'll learn EntropySmith—the pattern generation engine.

      Understand HOW passwords are made to understand
      how they can be broken.
    outro_text: |
      The Forge yields its secrets. You command the patterns.
    first_encounter: enc_chained_smith

    encounters:
      # TOUR: Introduction to EntropySmith
      - id: enc_chained_smith
        title: "The Chained Smith"
        type: tour
        tier: 0
        xp_reward: 10
        intro_text: |
          A massive forge dominates the chamber. Chained to it—
          the EntropySmith, ancient creator of passwords.

          "I am bound to create what you seek to destroy.

          ENTROPYSMITH generates passwords using:
          ◈ Grammar-based generation (patterns from corpus)
          ◈ Mutation rules (transformations on base words)
          ◈ Hybrid attacks (wordlist + mask combinations)

          Understand creation. Master destruction."
        objective: "Learn about password generation"
        success_text: |
          "The forge is ready. Let me show you its power."
        next_encounter: enc_first_forge

      # WALKTHROUGH: First forge command
      - id: enc_first_forge
        title: "First Forging"
        type: walkthrough
        tier: 2
        xp_reward: 20
        intro_text: |
          The EntropySmith gestures to the controls.

          "Generate passwords from your corpus analysis:

          `patternforge forge --corpus training --count 1000`

          This creates 1000 passwords following corpus patterns.
          These become candidates for your attacks."
        objective: "Generate passwords"
        solution: "patternforge forge --corpus training --count 1000"
        hint: "Run: patternforge forge --corpus training --count 1000"
        success_text: |
          The forge roars! Passwords flow like molten metal.

          "A thousand candidates, crafted from pattern analysis."
        failure_text: "Use the forge command with --corpus and --count."
        next_encounter: enc_mutations_grammar

      # DUEL: Mutations vs Grammar
      - id: enc_mutations_grammar
        title: "Mutations vs Grammar"
        type: duel
        tier: 3
        xp_reward: 25
        intro_text: |
          Two generation methods available:

          MUTATIONS:
          ◈ Transform existing words (leet speak, case toggle)
          ◈ Fast, predictable variations
          ◈ Good for known base words

          GRAMMAR:
          ◈ Generate from pattern rules
          ◈ Novel combinations
          ◈ Good for unknown patterns

          Your target: Cracking a corporate DB with KNOWN base words.
        objective: "Choose the better method"
        choices:
          - id: choice_mutations
            label: "Mutations"
            description: "Transform known words"
            leads_to: enc_custom_generation
            is_correct: true
          - id: choice_grammar
            label: "Grammar"
            description: "Generate from patterns"
            leads_to: enc_custom_generation
            is_correct: false
        success_text: |
          "Correct! Known bases + mutations = targeted attack.
          Grammar is for when you don't know the bases."
        failure_text: "With known words, mutations are more efficient."
        next_encounter: enc_custom_generation

      # CRAFT: Custom generation parameters
      - id: enc_custom_generation
        title: "Custom Generation"
        type: craft
        tier: 3
        xp_reward: 30
        intro_text: |
          The EntropySmith presents the configuration forge.

          "Configure a CUSTOM generator mask:

          Target: 8-character passwords
          Pattern: Capital + 5 lowercase + 2 digits

          Build: ?u?l?l?l?l?l?d?d"
        objective: "Configure generation pattern"
        solution: "?u?l?l?l?l?l?d?d"
        hint: "8 chars: ?u (1) + ?l?l?l?l?l (5) + ?d?d (2)"
        success_text: |
          The forge accepts your configuration!

          "Custom masks let you target SPECIFIC password policies."
        failure_text: "Count the characters: 1 upper + 5 lower + 2 digits = 8"
        next_encounter: enc_predict_output

      # FLASH: Predict generation output
      - id: enc_predict_output
        title: "Predict the Output"
        type: flash
        tier: 3
        xp_reward: 20
        intro_text: |
          "Calculate the KEYSPACE:

          Words: admin, root, user (3 words)
          Symbols: !, @, # (3 symbols)
          Years: 2020-2024 (5 years)

          Pattern: word + symbol + year

          TOTAL combinations = words × symbols × years = ?"
        objective: "Calculate: 3 × 3 × 5 = ?"
        solution: "45"
        hint: "Multiply: 3 × 3 × 5 = 45"
        success_text: |
          "45 combinations! 3 × 3 × 5.
          Keyspace calculation predicts attack time."
        failure_text: "3 words × 3 symbols × 5 years = ?"

        variants:
          heroic:
            intro_text: |
              "A LARGER keyspace:

              Words: admin, root, user, guest, test (5 words)
              Leet variants per word: 4
              Symbols: !, @, #, $, % (5 symbols)
              Years: 2020-2025 (6 years)

              Pattern: (word × leet) + symbol + year

              TOTAL = (5 × 4) × 5 × 6 = ?"
            solution: "600"
            hint: "20 word variants × 5 symbols × 6 years = 600"
            xp_reward: 35

          mythic:
            intro_text: |
              "The ULTIMATE keyspace calculation:

              Words: 100 words from corpus
              Rules: 64 transformations (best64)
              Symbols: 10 options
              Years: 10 options

              Pattern: (word × rules) + symbol + year

              How many MILLION combinations?"
            solution: "64"
            hint: "(100 × 64) × 10 × 10 = 6,400,000 = 6.4 million. Answer: 64 (×100,000)"
            xp_reward: 50

        next_encounter: enc_full_pipeline

      # PIPELINE: Chain commands together
      - id: enc_full_pipeline
        title: "The Complete Pipeline"
        type: pipeline
        tier: 4
        xp_reward: 40
        intro_text: |
          The EntropySmith presents the ultimate challenge.

          "Execute the FULL PIPELINE:

          STEP 1: Ingest corpus
          STEP 2: Analyze patterns
          STEP 3: Generate candidates

          Each step builds on the last."
        objective: "Execute the full generation pipeline"
        choices:
          - id: step_ingest
            label: "INGEST"
            description: "ingest"
            leads_to: enc_watch_forge
          - id: step_analyze
            label: "ANALYZE"
            description: "analyze"
            leads_to: enc_watch_forge
          - id: step_forge
            label: "FORGE"
            description: "forge"
            leads_to: enc_watch_forge
        success_text: |
          The pipeline executes flawlessly!

          "Ingest → Analyze → Forge. The complete workflow."
        failure_text: "Execute each step in order."
        next_encounter: enc_watch_forge

      # SIEGE: Watch generation
      - id: enc_watch_forge
        title: "Watch the Forge"
        type: siege
        tier: 3
        xp_reward: 30
        intro_text: |
          The EntropySmith begins forging.

          "OBSERVE the generation process.
          Watch how patterns become passwords.

          Generation takes time. Patience."
        objective: "Observe password generation"
        success_text: |
          "You've witnessed creation.
          Now use these candidates for attack."
        failure_text: "Watch the output. Press SPACE when prompted."
        next_encounter: enc_free_smith

      # PUZZLE_BOX: Free EntropySmith
      - id: enc_free_smith
        title: "Free EntropySmith"
        type: puzzle_box
        tier: 4
        xp_reward: 45
        intro_text: |
          The EntropySmith strains against chains.

          "THREE KEYS hold me bound.
          Speak them to free me:

          KEY 1: The first command (ingest)
          KEY 2: The analysis command (analyze)
          KEY 3: The generation command (forge)"
        objective: "Unlock the three keys"
        choices:
          - id: key_ingest
            label: "KEY 1"
            description: "ingest"
            leads_to: enc_strategy_choice
          - id: key_analyze
            label: "KEY 2"
            description: "analyze"
            leads_to: enc_strategy_choice
          - id: key_forge
            label: "KEY 3"
            description: "forge"
            leads_to: enc_strategy_choice
        solution: "ingest analyze forge"
        hint: "The three commands in order."
        success_text: |
          The chains shatter!

          "I am FREE! You have mastered the forge."
        failure_text: "Enter each key in sequence."
        next_encounter: enc_strategy_choice

      # FORK: Strategy selection
      - id: enc_strategy_choice
        title: "Strategy Choice"
        type: fork
        tier: 3
        xp_reward: 20
        intro_text: |
          The freed EntropySmith offers a choice:

          PATH OF SPEED:
          ◈ Generate fewer, targeted candidates
          ◈ Fast attacks on likely patterns
          ◈ Risk: might miss unusual passwords

          PATH OF DEPTH:
          ◈ Generate comprehensive candidates
          ◈ Thorough but slow
          ◈ Risk: time-consuming

          Your target: Quick initial recon.
        objective: "Choose your generation strategy"
        choices:
          - id: choice_speed
            label: "Path of Speed"
            description: "Targeted, fast generation"
            leads_to: enc_forge_master
            is_correct: true
          - id: choice_depth
            label: "Path of Depth"
            description: "Comprehensive, thorough"
            leads_to: enc_forge_master
            is_correct: false
        success_text: |
          "Speed for recon, depth when needed.
          Adapt your strategy to your goal."
        failure_text: "Quick recon = targeted speed."
        next_encounter: enc_forge_master

      # BOSS: Forge Master
      - id: enc_forge_master
        title: "Forge Master"
        type: flash
        tier: 5
        is_checkpoint: true
        xp_reward: 60
        intro_text: |
          The Forge Master emerges—guardian of all creation.

          "You freed my servant. But can you master ME?

          My password was GENERATED using:
          ◈ Grammar-based pattern
          ◈ Corporate corpus
          ◈ Standard transforms

          Pattern: Capitalized word + year + symbol"
        objective: "Defeat the Forge Master"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "YEAR", "SYMBOL"]
          complexity: compound
          discovery_method: pipeline
          tier: 5
          min_length: 9
          max_length: 12

        hash_type: md5
        hint: "Generated pattern: Word2024! format. Try common words + years + symbols."
        success_text: |
          The Forge Master kneels.

          "You command both analysis AND generation.
          The ultimate challenge awaits in the Throne Room..."
        failure_text: "Apply generation knowledge: word + year + symbol pattern."

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR", "SYMBOL"]
              complexity: transformed
              discovery_method: pipeline
              tier: 5
            hash_type: sha1
            hint: "The Forge Master transforms. Word, symbol, year, symbol—all corrupted."
            xp_reward: 95

          mythic:
            keyspace:
              source: "training_corpus"
              tokens: ["WORD", "SYMBOL", "YEAR", "SYMBOL"]
              complexity: transformed
              discovery_method: pipeline
              tier: 6
            hash_type: sha256
            hint: "The Master reveals ultimate creation. Your full arsenal is required."
            xp_reward: 150

        next_encounter: null

  # =========================================================================
  # CHAPTER 6: THRONE OF SECRETS
  # The Final Battle - Everything combined
  # =========================================================================
  - id: ch_throne_secrets
    title: "Throne of Secrets"
    description: "Face the ultimate challenge and claim victory"
    intro_text: |
      The Throne Room of the Dread Citadel.

      Everything you've learned converges here:
      ◈ Wordlists and pattern recognition
      ◈ Mask attacks and character analysis
      ◈ Rule transformations
      ◈ Corpus analysis with SCARAB
      ◈ Password generation with EntropySmith

      The Skeleton Key awaits. Break it, and the Citadel falls.
    outro_text: |
      The Skeleton Key shatters. The Citadel crumbles.

      You are now a true INFILTRATOR of the Cipher Circle.
    first_encounter: enc_throne_room

    encounters:
      # TOUR: Final briefing
      - id: enc_throne_room
        title: "The Throne Room"
        type: tour
        tier: 0
        xp_reward: 15
        intro_text: |
          The Null Cipher appears one final time.

          "Infiltrator. You have come far.

          Beyond these doors lies the Skeleton Key—
          the ultimate password, guarded by the Citadel's final defenses.

          You will face:
          ◈ Strategic decisions
          ◈ Multi-step challenges
          ◈ Progressive siege
          ◈ The final gambit

          Everything you've learned. One final test.

          Are you ready?"
        objective: "Receive the final briefing"
        success_text: |
          "Then go. Break the Key. Free the secrets."
        next_encounter: enc_approach_choice

      # FORK: Strategic approach
      - id: enc_approach_choice
        title: "Choose Your Approach"
        type: fork
        tier: 3
        xp_reward: 25
        intro_text: |
          Three paths lead to the Skeleton Key:

          PATH OF ANALYSIS:
          ◈ Thorough corpus analysis first
          ◈ Identify patterns before attacking
          ◈ Slower but methodical

          PATH OF SPEED:
          ◈ Quick wordlist attacks
          ◈ Escalate as needed
          ◈ Faster but riskier

          PATH OF POWER:
          ◈ Full pipeline attack
          ◈ Maximum resources
          ◈ Comprehensive but demanding
        objective: "Choose your strategic approach"
        choices:
          - id: choice_analysis
            label: "Analysis First"
            description: "Methodical, pattern-focused"
            leads_to: enc_first_seal
            is_correct: true
          - id: choice_speed
            label: "Speed Attack"
            description: "Fast escalation"
            leads_to: enc_first_seal
            is_correct: true
          - id: choice_power
            label: "Full Power"
            description: "Maximum resources"
            leads_to: enc_first_seal
            is_correct: true
        success_text: |
          "All paths lead to the Key. Your strategy will be tested."
        failure_text: "Choose your approach."
        next_encounter: enc_first_seal

      # PUZZLE_BOX: First seal
      - id: enc_first_seal
        title: "The First Seal"
        type: puzzle_box
        tier: 4
        xp_reward: 40
        intro_text: |
          A massive seal blocks your path.

          "THREE COMPONENTS protect me:

          COMPONENT 1: The hash type (md5)
          COMPONENT 2: The attack type (wordlist)
          COMPONENT 3: The ruleset (best64)

          Speak each to proceed."
        objective: "Unlock the three components"
        choices:
          - id: comp_hash
            label: "HASH"
            description: "md5"
            leads_to: enc_siege_core
          - id: comp_attack
            label: "ATTACK"
            description: "wordlist"
            leads_to: enc_siege_core
          - id: comp_rules
            label: "RULES"
            description: "best64"
            leads_to: enc_siege_core
        hint: "Enter: md5, then wordlist, then best64"
        success_text: |
          The seal crumbles!

          "You understand the attack stack."
        failure_text: "Enter each component in sequence."

        variants:
          heroic:
            intro_text: |
              The seal glows with stronger magic.

              "FIVE COMPONENTS guard this path:

              1: Hash algorithm (sha1)
              2: Attack mode (hybrid)
              3: Wordlist (rockyou)
              4: Mask suffix (?d?d?d?d)
              5: Ruleset (dive)

              Speak the complete attack chain."
            hint: "sha1, hybrid, rockyou, ?d?d?d?d, dive"
            xp_reward: 65

          mythic:
            intro_text: |
              The seal blazes with ancient power.

              "SIX COMPONENTS of the ultimate attack:

              1: Hash algorithm (sha256)
              2: Attack mode (combinator)
              3: Left wordlist (passwords)
              4: Right wordlist (years)
              5: Ruleset (toggles)
              6: Output format (john)

              Only the worthy may pass."
            hint: "sha256, combinator, passwords, years, toggles, john"
            xp_reward: 100

        next_encounter: enc_siege_core

      # SIEGE: Break the Key's core
      - id: enc_siege_core
        title: "Break the Key's Core"
        type: siege
        tier: 4
        xp_reward: 45
        intro_text: |
          The Skeleton Key's core is exposed.

          "Watch as we BREACH its defenses.
          Each layer falls. Each pattern reveals itself.

          This is the final analysis."
        objective: "Observe the breach"
        success_text: |
          The core cracks!

          "One final choice remains..."
        failure_text: "Observe the breach sequence."
        next_encounter: enc_final_gambit

      # GAMBIT: All or nothing
      - id: enc_final_gambit
        title: "All or Nothing"
        type: gambit
        tier: 5
        xp_reward: 50
        intro_text: |
          The Skeleton Key pulses with power.

          SAFE PATH:
          ◈ Conservative attack
          ◈ 70% success chance
          ◈ Small XP bonus on success

          RISKY PATH:
          ◈ All-out assault
          ◈ 50% success chance
          ◈ MASSIVE XP bonus on success
          ◈ Significant penalty on failure

          This is your final gambit.
        objective: "Make your final choice"
        choices:
          - id: choice_safe_final
            label: "Play It Safe"
            description: "Conservative, 70% chance"
            leads_to: enc_skeleton_key
            is_correct: true
          - id: choice_all_in
            label: "All In"
            description: "All-out assault, 50% chance, big reward"
            leads_to: enc_skeleton_key
            is_correct: true
        success_text: |
          "Your choice is made. Face the Key."
        failure_text: "Choose your final gambit."
        next_encounter: enc_skeleton_key

      # BOSS: The Skeleton Key (FINAL BOSS)
      - id: enc_skeleton_key
        title: "THE SKELETON KEY"
        type: flash
        tier: 6
        is_checkpoint: true
        xp_reward: 150
        intro_text: |
          THE SKELETON KEY materializes before you.

          The ultimate password. The master of all patterns.

          "I AM the culmination of human predictability.
          I contain EVERY pattern you've learned:

          ◈ Common words
          ◈ Transformations
          ◈ Masks
          ◈ Years and symbols
          ◈ Corporate conventions

          BREAK ME... if you can."

          Use EVERYTHING. This is the final test.
        objective: "SHATTER THE SKELETON KEY"

        keyspace:
          source: "training_corpus"
          tokens: ["WORD", "YEAR", "SYMBOL"]
          complexity: transformed
          discovery_method: pipeline
          tier: 6
          min_length: 10
          max_length: 16

        hash_type: md5
        hint: "The ultimate pattern: Transformed word + year + symbol. Use your full arsenal."
        success_text: |
          THE SKELETON KEY SHATTERS!

          The Dread Citadel CRUMBLES around you.

          From the ruins, the Null Cipher appears one final time:

          "You have done it, Infiltrator.

          You see the patterns. You understand the weakness.
          You have become what you were born to be.

          Welcome to the Cipher Circle.

          The Skeleton Key is broken.
          The Citadel falls.
          The Circle remembers."

          ═══════════════════════════════════════
                    V I C T O R Y
          ═══════════════════════════════════════
        failure_text: "Use everything: wordlists + masks + rules + analysis. The Key will fall."

        variants:
          heroic:
            keyspace:
              source: "training_corpus"
              complexity: transformed
              discovery_method: pipeline
              tier: 6
            hash_type: sha256
            hint: "Heroic Key: Maximum transformation."
            xp_reward: 250

          mythic:
            keyspace:
              source: "training_corpus"
              complexity: transformed
              discovery_method: pipeline
              tier: 6
            hash_type: sha512
            hint: "Mythic Key: The ultimate challenge."
            xp_reward: 500

        next_encounter: null
